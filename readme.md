# Modular Nix Configuration

A comprehensive and modular Nix configuration for managing both NixOS and macOS (nix-darwin) systems with shared home-manager setups.

## Structure

This repository follows a modular design that separates different aspects of the configuration:

```
.
├── flake.nix                # Entry point with inputs and outputs
├── hosts                    # Machine-specific configurations
│   ├── common               # Shared between hosts
│   ├── nixos                # NixOS-specific hosts
│   └── darwin               # Darwin-specific hosts
├── modules                  # Reusable functionality modules
│   ├── nixos                # NixOS-specific modules
│   ├── darwin               # Darwin-specific modules
│   └── common               # Cross-platform modules
├── home                     # Home-manager configurations
│   ├── modules              # Reusable home-manager modules
│   ├── profiles             # User profiles combining modules
│   └── users                # User-specific configurations
├── overlays                 # Custom package overlays
└── pkgs                     # Custom packages
```

## Getting Started

### Prerequisites

- For NixOS systems: NixOS installed
- For macOS systems: nix-darwin and Homebrew installed
- Git
- Nix with flakes enabled

### Setup

1. Clone this repository:

```bash
git clone https://github.com/yourusername/nix-config.git
cd nix-config
```

2. Build your system configuration:

For NixOS:
```bash
sudo nixos-rebuild switch --flake .#laptop
```

For Darwin:
```bash
darwin-rebuild switch --flake .#macbook
```

## Adding a New System

1. Create a new directory for your system in the appropriate location:
   - For NixOS: `hosts/nixos/your-hostname/`
   - For Darwin: `hosts/darwin/your-hostname/`

2. Create a `default.nix` file in this directory with your system-specific configuration.

3. For NixOS, also create a `hardware-configuration.nix` file (typically generated by the installer